{"ast":null,"code":"import _objectSpread from\"c:/Users/lone-DEV/OneDrive/Documents/ticket management system/react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from'react';import{Link,useNavigate,useLocation}from'react-router-dom';import{AuthUtils,ToastUtils,ValidationUtils}from'../../utils';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const LoginPage=()=>{const[email,setEmail]=useState('');const[password,setPassword]=useState('');const[errors,setErrors]=useState({});const[isLoading,setIsLoading]=useState(false);const navigate=useNavigate();const location=useLocation();// Redirect if already authenticated\nuseEffect(()=>{if(AuthUtils.isAuthenticated()){var _location$state,_location$state$from;const from=((_location$state=location.state)===null||_location$state===void 0?void 0:(_location$state$from=_location$state.from)===null||_location$state$from===void 0?void 0:_location$state$from.pathname)||'/dashboard';navigate(from,{replace:true});}},[navigate,location]);const validateForm=()=>{const newErrors={};if(!ValidationUtils.isRequired(email)){newErrors.email='Email is required';}else if(!ValidationUtils.isValidEmail(email)){newErrors.email='Please enter a valid email';}if(!ValidationUtils.isRequired(password)){newErrors.password='Password is required';}setErrors(newErrors);return Object.keys(newErrors).length===0;};const handleSubmit=async e=>{e.preventDefault();if(!validateForm()){return;}setIsLoading(true);try{const result=AuthUtils.authenticate(email,password);if(result.success){var _location$state2,_location$state2$from;ToastUtils.success('Login successful!');const from=((_location$state2=location.state)===null||_location$state2===void 0?void 0:(_location$state2$from=_location$state2.from)===null||_location$state2$from===void 0?void 0:_location$state2$from.pathname)||'/dashboard';navigate(from,{replace:true});}else{ToastUtils.error(result.message);}}catch(error){ToastUtils.error('An error occurred during login. Please try again.');}finally{setIsLoading(false);}};const handleInputChange=e=>{const{name,value}=e.target;if(name==='email'){setEmail(value);}else if(name==='password'){setPassword(value);}// Clear error when user starts typing\nif(errors[name]){setErrors(prev=>_objectSpread(_objectSpread({},prev),{},{[name]:''}));}};return/*#__PURE__*/_jsx(\"div\",{className:\"container\",style:{margin:'3rem auto',maxWidth:'500px'},children:/*#__PURE__*/_jsx(\"div\",{className:\"card\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"card-body\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"card-title\",style:{textAlign:'center',marginBottom:'1.5rem'},children:\"Login\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"email\",className:\"form-label\",children:\"Email\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",id:\"email\",name:\"email\",className:\"form-control \".concat(errors.email?'is-invalid':''),value:email,onChange:handleInputChange,placeholder:\"Enter your email\"}),errors.email&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.email})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"password\",className:\"form-label\",children:\"Password\"}),/*#__PURE__*/_jsx(\"input\",{type:\"password\",id:\"password\",name:\"password\",className:\"form-control \".concat(errors.password?'is-invalid':''),value:password,onChange:handleInputChange,placeholder:\"Enter your password\"}),errors.password&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:errors.password})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",style:{width:'100%'},disabled:isLoading,children:isLoading?/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(\"span\",{className:\"spinner\"}),\" Logging in...\"]}):'Login'})]}),/*#__PURE__*/_jsx(\"div\",{style:{textAlign:'center',marginTop:'1.5rem'},children:/*#__PURE__*/_jsxs(\"p\",{children:[\"Don't have an account? \",/*#__PURE__*/_jsx(Link,{to:\"/auth/signup\",children:\"Sign up\"})]})}),/*#__PURE__*/_jsxs(\"div\",{style:{marginTop:'1.5rem',padding:'1rem',backgroundColor:'#f3f4f6',borderRadius:'0.5rem'},children:[/*#__PURE__*/_jsx(\"h6\",{style:{textAlign:'center'},children:\"Demo Credentials\"}),/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:'0.5rem'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Email:\"}),\" admin@example.com\"]}),/*#__PURE__*/_jsxs(\"p\",{style:{marginBottom:'0'},children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Password:\"}),\" password123\"]})]})]})})});};export default LoginPage;","map":{"version":3,"names":["React","useState","useEffect","Link","useNavigate","useLocation","AuthUtils","ToastUtils","ValidationUtils","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","LoginPage","email","setEmail","password","setPassword","errors","setErrors","isLoading","setIsLoading","navigate","location","isAuthenticated","_location$state","_location$state$from","from","state","pathname","replace","validateForm","newErrors","isRequired","isValidEmail","Object","keys","length","handleSubmit","e","preventDefault","result","authenticate","success","_location$state2","_location$state2$from","error","message","handleInputChange","name","value","target","prev","_objectSpread","className","style","margin","maxWidth","children","textAlign","marginBottom","onSubmit","htmlFor","type","id","concat","onChange","placeholder","width","disabled","marginTop","to","padding","backgroundColor","borderRadius"],"sources":["c:/Users/lone-DEV/OneDrive/Documents/ticket management system/react-app/src/pages/auth/LoginPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Link, useNavigate, useLocation } from 'react-router-dom';\r\nimport { AuthUtils, ToastUtils, ValidationUtils } from '../../utils';\r\n\r\nconst LoginPage = () => {\r\n  const [email, setEmail] = useState('');\r\n  const [password, setPassword] = useState('');\r\n  const [errors, setErrors] = useState({});\r\n  const [isLoading, setIsLoading] = useState(false);\r\n  \r\n  const navigate = useNavigate();\r\n  const location = useLocation();\r\n  \r\n  // Redirect if already authenticated\r\n  useEffect(() => {\r\n    if (AuthUtils.isAuthenticated()) {\r\n      const from = location.state?.from?.pathname || '/dashboard';\r\n      navigate(from, { replace: true });\r\n    }\r\n  }, [navigate, location]);\r\n  \r\n  const validateForm = () => {\r\n    const newErrors = {};\r\n    \r\n    if (!ValidationUtils.isRequired(email)) {\r\n      newErrors.email = 'Email is required';\r\n    } else if (!ValidationUtils.isValidEmail(email)) {\r\n      newErrors.email = 'Please enter a valid email';\r\n    }\r\n    \r\n    if (!ValidationUtils.isRequired(password)) {\r\n      newErrors.password = 'Password is required';\r\n    }\r\n    \r\n    setErrors(newErrors);\r\n    return Object.keys(newErrors).length === 0;\r\n  };\r\n  \r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    \r\n    if (!validateForm()) {\r\n      return;\r\n    }\r\n    \r\n    setIsLoading(true);\r\n    \r\n    try {\r\n      const result = AuthUtils.authenticate(email, password);\r\n      \r\n      if (result.success) {\r\n        ToastUtils.success('Login successful!');\r\n        const from = location.state?.from?.pathname || '/dashboard';\r\n        navigate(from, { replace: true });\r\n      } else {\r\n        ToastUtils.error(result.message);\r\n      }\r\n    } catch (error) {\r\n      ToastUtils.error('An error occurred during login. Please try again.');\r\n    } finally {\r\n      setIsLoading(false);\r\n    }\r\n  };\r\n  \r\n  const handleInputChange = (e) => {\r\n    const { name, value } = e.target;\r\n    \r\n    if (name === 'email') {\r\n      setEmail(value);\r\n    } else if (name === 'password') {\r\n      setPassword(value);\r\n    }\r\n    \r\n    // Clear error when user starts typing\r\n    if (errors[name]) {\r\n      setErrors(prev => ({ ...prev, [name]: '' }));\r\n    }\r\n  };\r\n  \r\n  return (\r\n    <div className=\"container\" style={{ margin: '3rem auto', maxWidth: '500px' }}>\r\n      <div className=\"card\">\r\n        <div className=\"card-body\">\r\n          <h2 className=\"card-title\" style={{ textAlign: 'center', marginBottom: '1.5rem' }}>Login</h2>\r\n          \r\n          <form onSubmit={handleSubmit}>\r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"email\" className=\"form-label\">Email</label>\r\n              <input\r\n                type=\"email\"\r\n                id=\"email\"\r\n                name=\"email\"\r\n                className={`form-control ${errors.email ? 'is-invalid' : ''}`}\r\n                value={email}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Enter your email\"\r\n              />\r\n              {errors.email && <div className=\"invalid-feedback\">{errors.email}</div>}\r\n            </div>\r\n            \r\n            <div className=\"form-group\">\r\n              <label htmlFor=\"password\" className=\"form-label\">Password</label>\r\n              <input\r\n                type=\"password\"\r\n                id=\"password\"\r\n                name=\"password\"\r\n                className={`form-control ${errors.password ? 'is-invalid' : ''}`}\r\n                value={password}\r\n                onChange={handleInputChange}\r\n                placeholder=\"Enter your password\"\r\n              />\r\n              {errors.password && <div className=\"invalid-feedback\">{errors.password}</div>}\r\n            </div>\r\n            \r\n            <button \r\n              type=\"submit\" \r\n              className=\"btn btn-primary\"\r\n              style={{ width: '100%' }}\r\n              disabled={isLoading}\r\n            >\r\n              {isLoading ? (\r\n                <>\r\n                  <span className=\"spinner\"></span> Logging in...\r\n                </>\r\n              ) : 'Login'}\r\n            </button>\r\n          </form>\r\n          \r\n          <div style={{ textAlign: 'center', marginTop: '1.5rem' }}>\r\n            <p>Don't have an account? <Link to=\"/auth/signup\">Sign up</Link></p>\r\n          </div>\r\n          \r\n          <div style={{ marginTop: '1.5rem', padding: '1rem', backgroundColor: '#f3f4f6', borderRadius: '0.5rem' }}>\r\n            <h6 style={{ textAlign: 'center' }}>Demo Credentials</h6>\r\n            <p style={{ marginBottom: '0.5rem' }}><strong>Email:</strong> admin@example.com</p>\r\n            <p style={{ marginBottom: '0' }}><strong>Password:</strong> password123</p>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default LoginPage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}